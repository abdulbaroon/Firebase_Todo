(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{9735:function(e,t,n){Promise.resolve().then(n.bind(n,209))},209:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(7437),s=n(2265),o=n(1748),i=n(7161),a=n(3441),c=n(6285),l=n(4972),d=n(356),u=n(4092),h=n(5166),m=n(9539),f=n.n(m),x=n(6288),g=e=>{let t=(0,o.N8)(i.l2),n=(0,o.iH)(t,"/notifications"),r={message:e,current_date:f()(new Date).format("MM/DD/YYYY")};(0,o.VF)(n,r)},p=()=>{let e=(0,o.N8)(i.l2),t=(0,s.useRef)(null),{currentUser:n}=(0,s.useContext)(l.AuthContext),m=()=>{if(t.current){let e=t.current.querySelector("input");e&&(e.value="")}};return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault();let r=new FormData(t.currentTarget),s=r.get("newDate"),i=r.get("title");if(console.log(s,i),i&&s){if(n){let r=(0,o.iH)(e,"/todos-".concat(n?n.uid:"")),a={title:i,done:!1,due_date:s,current_date:f()(new Date).format("MM/DD/YYYY")};(0,o.VF)(r,a),t.currentTarget.reset(),m(),x.toast.success("Todo Created"),g("New todo Created by "+n.displayName)}else x.toast.error("First Login"),t.currentTarget.reset()}else x.toast.error("Fill the all details")},children:(0,r.jsxs)("div",{className:"flex justify-center mt-10 items-center gap-3",children:[(0,r.jsx)(a.Z,{id:"outlined-basic",label:"Task Name",name:"title",variant:"outlined",sx:{}}),(0,r.jsx)(d._,{dateAdapter:h.y,children:(0,r.jsx)(u.M,{ref:t,label:"Select Date",name:"newDate"})}),(0,r.jsx)(c.Z,{type:"submit",variant:"contained",sx:{mt:2,mb:2},children:"Submit"})]})})},j=n(4845),b=n(470),Z=n(6520),v=n(412),y=n(8430),w=n(4558),D=n(9835),E=n(360),S=n(3206),C=n(6009),T=n(4200),N=n(3260),Y=n(9528),I=n(3033),_=n(7907);let k=e=>{let{todo:t,indexs:n}=e,[a,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(t.title),[h,m]=(0,s.useState)(t.current_date),[p,j]=(0,s.useState)(t.due_date),b=(0,o.N8)(i.l2),{currentUser:Z}=(0,s.useContext)(l.AuthContext);function v(){c(e=>!e)}return(0,s.useEffect)(()=>{let e=document.getElementById(t.id);if(e&&a){e.focus();let t=document.createRange(),n=window.getSelection();t.setStart(e,1),t.collapse(!0),null==n||n.removeAllRanges(),null==n||n.addRange(t)}},[a,t.id]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{suppressContentEditableWarning:!0,children:n+1}),(0,r.jsx)(w.Z,{contentEditable:a,suppressContentEditableWarning:!0,id:t.id,onInput:function(e){u(e.currentTarget.innerText);let t=document.createRange(),n=window.getSelection();t.setStart(e.currentTarget,1),t.collapse(!0),null==n||n.removeAllRanges(),null==n||n.addRange(t)},children:d}),(0,r.jsx)(w.Z,{contentEditable:!1,suppressContentEditableWarning:!0,onInput:function(e){m(e.currentTarget.innerText)},children:f()(h).format("DD/MM/YYYY")}),(0,r.jsx)(w.Z,{contentEditable:!1,suppressContentEditableWarning:!0,onInput:function(e){j(e.currentTarget.innerText)},children:f()(p).format("DD/MM/YYYY")}),(0,r.jsx)(w.Z,{suppressContentEditableWarning:!0,children:(0,r.jsx)("div",{className:"border w-28 ".concat(t.done?"bg-green-500":"bg-red-400"," text-center rounded-lg"),children:(0,r.jsxs)("p",{className:"text-base TEXT-",children:["".concat(t.done?"Completed":"Incomplete")," "]})})}),(0,r.jsxs)(w.Z,{children:[!a&&(0,r.jsx)(S.Z,{size:"small",onClick:function(){let e=(0,o.iH)(b,"/todos-".concat(Z?Z.uid:"","/").concat(t.id)),n={...t,done:!0};(0,o.t8)(e,n).then(()=>{console.log("Todo updated successfully"),x.toast.success("Todo marked as Done"),g("todo Mark as Done by "+(null==Z?void 0:Z.displayName))}).catch(e=>{x.toast.error("Error: "+(null==e?void 0:e.message)),console.error("Error updating todo: ",e)})},children:(0,r.jsx)(I.Z,{})}),!a&&(0,r.jsx)(S.Z,{size:"small",onClick:v,children:(0,r.jsx)(C.Z,{})}),a&&(0,r.jsx)(S.Z,{size:"small",sx:{mr:2},onClick:function(){let e=(0,o.iH)(b,"/todos-".concat(Z?Z.uid:"","/").concat(t.id)),n={...t,title:d,current_date:h,due_date:p};(0,o.t8)(e,n).then(()=>{v(),x.toast.success("Todo Updated successfully"),g("todo Updted by "+(null==Z?void 0:Z.displayName))}).catch(e=>{x.toast.error("Error: "+(null==e?void 0:e.message)),console.error("Error updating todo: ",e)})},children:(0,r.jsx)(T.Z,{})}),!a&&(0,r.jsx)(S.Z,{size:"small",sx:{mr:2},onClick:function(){let e=(0,o.iH)(b,"/todos-".concat(Z?Z.uid:"","/").concat(t.id));(0,o.Od)(e).then(()=>{console.log("Todo deleted successfully"),x.toast.success("Todo Deleted"),g("Todo Deleted by "+(null==Z?void 0:Z.displayName))}).catch(e=>{x.toast.error("Error"+(null==e?void 0:e.message)),console.error("Error deleting todo: ",e)})},children:(0,r.jsx)(N.Z,{})}),a&&(0,r.jsx)(S.Z,{size:"small",onClick:v,children:(0,r.jsx)(Y.Z,{})})]})]})};var A=()=>{let e=(0,o.N8)(i.l2),[t,n]=(0,s.useState)([]),{currentUser:a}=(0,s.useContext)(l.AuthContext),c=(0,_.useRouter)(),d=sessionStorage.getItem("user");return a||d||c.push("/Login"),(0,s.useEffect)(()=>{if(a){let t=(0,o.iH)(e,"/todos-".concat(a?a.uid:""));(0,o.jM)(t,e=>{let t=e.val(),r=[];for(let e in t)r.push({id:e,...t[e]});n(r)})}},[e,a]),(0,r.jsx)("div",{className:" m-0 md:m-10",children:(0,r.jsx)(j.Z,{component:b.Z,children:(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(v.Z,{children:(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(w.Z,{component:"th",children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"ID"})}),(0,r.jsx)(w.Z,{component:"th",sx:{width:"35%"},children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"Name"})}),(0,r.jsx)(w.Z,{component:"th",children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"created Date"})}),(0,r.jsx)(w.Z,{component:"th",children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"Due Date"})}),(0,r.jsx)(w.Z,{component:"th",children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"status"})}),(0,r.jsx)(w.Z,{component:"th",sx:{width:"20%"},children:(0,r.jsx)(D.Z,{fontWeight:"bold",children:"Actions"})})]})}),(0,r.jsx)(E.Z,{children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(y.Z,{children:(0,r.jsx)(k,{todo:e,indexs:t})},e.id))})]})})})},M=n(4232),R=n(9763);let W=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(R.wT,{maxSnack:3,children:[(0,r.jsx)(p,{}),(0,r.jsx)(A,{})]})});var F=(0,M.default)(()=>Promise.resolve(W),{ssr:!1})},7161:function(e,t,n){"use strict";n.d(t,{Td:function(){return m},eE:function(){return h},Yc:function(){return x},l2:function(){return i},w2:function(){return c},SA:function(){return l},D5:function(){return f}});var r=n(2730),s=n(6142);let o={apiKey:"AIzaSyBvMiUuz2RXynD4XyAHwhsiUMsEY_7o9J0",authDomain:"myproject-7b840.firebaseapp.com",databaseURL:"https://myproject-7b840-default-rtdb.firebaseio.com",projectId:"myproject-7b840",storageBucket:"myproject-7b840.appspot.com",messagingSenderId:"979447900958",appId:"1:979447900958:web:108583f4ef22de1db0b70f"},i=(0,s.ZF)(function(){if(o&&o.apiKey)return o;throw Error("No Firebase configuration object provided.\nAdd your web app's configuration object to firebase-config.ts")}()),a=(0,r.v0)(i),c=async(e,t)=>{if(e||t)return await (0,r.e5)(a,e,t)},l=async(e,t)=>{if(e||t)return await (0,r.Xb)(a,e,t)},d=new r.hJ,u=new r.GH,h=async()=>await (0,r.rh)(a,d),m=async()=>await (0,r.rh)(a,u),f=e=>(0,r.Aj)(a,e),x=async()=>await (0,r.w7)(a)},4972:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthContext:function(){return c},AuthProvider:function(){return l}});var r=n(7437),s=n(2265),o=n(7907),i=n(7161),a=n(6288);let c=(0,s.createContext)({currentUser:{},setCurrentUser:e=>{},signOut:()=>{}}),l=e=>{let{children:t}=e,[n,l]=(0,s.useState)(null),d=(0,o.useRouter)();return(0,s.useEffect)(()=>(0,i.D5)(e=>{e?(l(e),sessionStorage.setItem("avatar",e.photoURL),sessionStorage.setItem("user","true")):(sessionStorage.removeItem("avatar"),sessionStorage.removeItem("user"))}),[]),(0,r.jsx)(c.Provider,{value:{currentUser:n,setCurrentUser:l,signOut:()=>{(0,i.Yc)(),l(null),sessionStorage.removeItem("avatar"),sessionStorage.removeItem("user"),a.toast.success("User Logout"),d.push("/")}},children:t})}}},function(e){e.O(0,[452,481,893,75,441,824,894,971,69,744],function(){return e(e.s=9735)}),_N_E=e.O()}]);